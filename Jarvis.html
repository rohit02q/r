<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jarvis</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #0b0c10;
            color: #c5c6c7;
            font-family: Arial, sans-serif;
        }

        h1 {
            font-size: 2.5rem;
            color: #66fcf1;
            margin-bottom: 20px;
        }

        .container {
            text-align: center;
            background-color: #1f2833;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 500px;
        }

        .container button {
            background-color: #66fcf1;
            color: #0b0c10;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .container button:hover {
            background-color: #45a29e;
        }

        .chat-container {
            background-color: #1f2833;
            padding: 20px;
            width: 90%;
            max-width: 500px;
            border-radius: 10px;
            margin-top: 20px;
            height: 300px;
            overflow-y: auto;
            font-size: 1rem;
        }

        .chat-container div {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 5px;
            text-align: left;
            color: #0b0c10;
            font-weight: bold;
        }

        .user-msg {
            background-color: #45a29e;
        }

        .jarvis-msg {
            background-color: #66fcf1;
        }
    </style>
    <script >
       let user;
setTimeout(() => {
    user = prompt("Enter your name!");
}, 700);

// Speech Synthesis Function
function speaker(text) {
    const message = new SpeechSynthesisUtterance(text);
    message.lang = 'hi-IN';
    message.pitch = 1;
    message.rate = 1;
    window.speechSynthesis.speak(message);
    addMessageToChat('Jarvis', text); // Add Jarvis message to chat
}

// Add messages to chat container with prefix
function addMessageToChat(sender, message) {
    const chatContainer = document.getElementById("chat-container");
    const msgElement = document.createElement("div");
    msgElement.classList.add(sender === "Jarvis" ? "jarvis-msg" : "user-msg");
    msgElement.textContent = `${sender}: ${message}`;
    chatContainer.appendChild(msgElement);
    chatContainer.scrollTop = chatContainer.scrollHeight; // Scroll to bottom
}

// Random Greetings Function
function getRandomGreeting() {
    const greetings = [
        "Hello, how can I assist you today?",
        "Hi there! What can I do for you?",
        "Hey! How can I be of service?",
        "Greetings! What do you need help with today?",
        "Hello! Ready to assist you!"
    ];
    const randomIndex = Math.floor(Math.random() * greetings.length);
    return greetings[randomIndex];
}

// Greeting Function
function greetUser() {
    speaker("Hello, sir!");

    const now = new Date();
    const hours = now.getHours();
    let greeting;

    if (hours >= 0 && hours < 12) {
        greeting = "Good Morning";
    } else if (hours >= 12 && hours < 17) {
        greeting = "Good Afternoon";
    } else {
        greeting = "Good Evening";
    }

    speaker(greeting + ", " + getRandomGreeting());
}

// Speech Recognition Function
function initSpeechRecognition() {
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SpeechRecognition) {
        alert("Your browser does not support Speech Recognition. Please use Google Chrome.");
        return;
    }

    const recognition = new SpeechRecognition();
    recognition.lang = 'en-IN';
    recognition.continuous = false;
    recognition.interimResults = false;

    recognition.onstart = function() {
        speaker(" " + getRandomGreeting());
    };

    recognition.onresult = function(event) {
        const transcript = event.results[event.results.length - 1][0].transcript.trim().toLowerCase();
        console.log(`${user} said:`, transcript);
        addMessageToChat(user, transcript); // Add user's message to chat using user's name

        // Casual conversation phrases and responses
        const casualResponses = {
            "what is your name": "My name is Jarvis.",
            "how are you": "I'm here to assist you. How can I help?",
            "hello": "Hello! How can I assist you?",
            "who created you": "I was created by Rohit who wanted a smart assistant.",
            "thank you": "You're welcome!",
             "who made you": "I was created by Rohit who wanted a smart assistant.",
            "tumhe kisne banaya hai": "I was created by Rohit who wanted a smart assistant.",
           
            "goodbye": "Goodbye! Have a nice day!"
        };

        // Check if the transcript matches any casual phrase
        for (let phrase in casualResponses) {
            if (transcript.includes(phrase)) {
                speaker(casualResponses[phrase]);
                return;
            }
        }

        // Search-related keywords and general commands
        const searchKeywords = ['search', 'find', 'look for', 'who is', 'what is', 'how to', 'tell me about'];
        const openKeywords = ['open', 'launch', 'go to', 'start'];
        let matched = false;

        // Handle search queries
        for (let keyword of searchKeywords) {
            if (transcript.includes(keyword)) {
                let searchQuery = transcript.split(keyword)[1] || '';
                searchQuery = searchQuery.trim();
                if (searchQuery) {
                    speaker("Searching for " + searchQuery);
                    window.open('https://www.google.com/search?q=' + searchQuery, '_blank');
                } else {
                    speaker("Please specify what you'd like to search.");
                }
                matched = true;
                break;
            }
        }

        // Handle open website commands
        for (let keyword of openKeywords) {
            if (transcript.includes(keyword)) {
                let siteQuery = transcript.split(keyword)[1].trim();
                if (!siteQuery.includes("http")) {
                    siteQuery = "https://" + siteQuery + ".com";
                }
                speaker("Opening " + siteQuery);
                window.open(siteQuery, "_blank");
                matched = true;
                break;
            }
        }

        // If no matches are found, inform the user
        if (!matched) {
            speaker("I'm sorry, I didn't understand that.");
        }
    };

    recognition.onerror = function(event) {
        console.error("Speech recognition error:", event.error);
        speaker("I couldn't understand. Please try again.");
    };

    recognition.onend = function() {
        console.log("Speech recognition ended.");
    };

    recognition.start();
}

// Flag to track the first-time greeting
let isFirstTime = true;

// Handle Start Button Click
function handleStartButton() {
    if (isFirstTime) {
        greetUser(); 
        // Greet the user first time
        document.getElementById("btn").innerText = "Ask";
        setTimeout(initSpeechRecognition, 4000); // Start listening after greeting
        isFirstTime = false; // Set flag to false after the first time
    } else {
        initSpeechRecognition();
    }
}
    </script>
</head>
<body>
    <h1>Welcome to Jarvis!</h1>
    <div class="container">
        <button id="btn" onclick="handleStartButton();">Start</button>
    </div>

    <div id="chat-container" class="chat-container"></div>
</body>
</html>
